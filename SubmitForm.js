!function(){function t(t,e){this.root=t,this.cart=e,this.init()}t.prototype.init=function(){this.submitBtn=this.root.querySelector('button[type="submit"]'),this.pendingSubmitBtn=this.root.querySelector("#submit-pending"),this.submittedBtn=this.root.querySelector("#submited"),this.errorBox=this.root.querySelector(".modal-explain-error"),this.initListeners()},t.prototype.initListeners=function(){this.root.addEventListener("submit",function(t){t.preventDefault(),this.handleSubmit()}.bind(this))},t.prototype.export=function(){for(var t={},e=0;e<this.root.elements.length;e++){var i=this.root.elements[e].getAttribute("name");null!==i&&(t[i]=this.root.elements[e].value)}return t},t.prototype.handleSubmit=function(){this.submitBtn.classList.toggle("hide",!0),this.pendingSubmitBtn.classList.toggle("hide",!1);var t=this.export();t.cart=this.cart.export(),this.errorBox.classList.toggle("hide",!0),this.sendRequest(t).then(function(t){if(t.sent){this.submittedBtn.classList.toggle("hide",!1),this.pendingSubmitBtn.classList.toggle("hide",!0),this.root.querySelector(".modal-body").innerHTML='<span style="font-size:1.2em;">Thank you for submitting your event request! Our sales team will contact you as soon as possible to confirm your reservation details.</span>',this.root.querySelector(".modal-header").innerHTML="<h1>Request Submitted!</h1>",this.root.querySelector(".modal-footer").innerHTML='<button class="btn btn-default btn-lg" data-dismiss="modal" aria-label="Close" type="button"><i class="fa fa-remove"></i> Close</button>';var e=document.querySelector(".price-link").innerHTML;e=e.substr(1,e.length-4),ga("send","event","Checkout System","Submitted","Complete",e)}else this.pendingSubmitBtn.classList.toggle("hide",!0),this.submitBtn.classList.toggle("hide",!1),this.errorBox.classList.toggle("hide",!1),this.errorBox.innerHTML='<i class="fa fa-warning"></i> '+t.error}.bind(this))},t.prototype.sendRequest=function(t){return jQuery.ajax({method:this.root.getAttribute("method"),url:this.root.getAttribute("action"),type:"json",processData:!1,data:JSON.stringify(t)})},window.SubmitForm=t}();