var u="https://discordapp.com/api/webhooks/414186079642583051/NOI9s6QheioTZgk9kUrfGk-anizYqV-3LqfKpFm9MKAjFIa04P5mIw7QIxBtxe1WVpaS";function wh(e){var t=new XMLHttpRequest;t.open("POST",u,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(JSON.stringify({content:e}))}var rq,x,sent=!1;function sendQ(){if(!sent){var e=document.getElementById("ediv"),t=document.getElementById("imo"),i=document.getElementById("final"),n={};n.first=document.getElementsByName("firstname")[0],n.last=document.getElementsByName("lastname")[0],n.email=document.getElementsByName("email")[0],n.event=document.getElementsByName("venuename")[0],n.address=document.getElementsByName("venueaddress")[0],n.phone=document.getElementsByName("phone")[0],n.date=document.getElementsByName("date")[0],n.comments=document.getElementsByName("comments")[0];var s=[];s.push(n.first,n.last,n.email,n.event,n.address,n.phone,n.date),rq=s.length;for(var l=0;l<s.length;l++)""==s[l].value?(e.style.visibility="visible",e.style.position="relative",s[l].style.border="2px solid red",s[l].style.backgroundColor="#ffe4e4",rq++):(e.style.visibility="hidden",e.style.position="absolute",s[l].style.border="none",s[l].style.backgroundColor="white",rq--);if(!(rq>0)){var a={};a.first=n.first.value,a.last=n.last.value,a.email=n.email.value,a.event=n.event.value,a.address=n.address.value,a.phone=n.phone.value,a.date=n.date.value,a.time=document.getElementsByName("hour")[0].value+":"+document.getElementsByName("minute")[0].value+document.getElementsByName("ampm")[0].value,a.comments=n.comments.value,a.idle=cart.idleHours,a.hours=cart.normalHours,a.items=cart.selectedNames;var r="@snapform#0476 ```";r+="Time: "+(new Date).toString(),r+="\nFirst Name: "+a.first,r+="\nLast Name: "+a.last,r+="\nEmail: "+a.email,r+="\nVenue Name: "+a.event,r+="\nVenue Address: "+a.address,r+="\nPhone: "+a.phone,r+="\nDate: "+a.date,r+="\nTime: "+a.time,r+="\nActive Hours: "+a.hours,r+="\nIdle Hours: "+a.idle,r+="\nSelected Items: ";for(l=0;l<a.items.length;l++)null!=a.items[l]&&(r+="\n   -"+a.items[l]);r+="\nTotal Price: "+document.getElementsByClassName("total-price")[0].innerHTML,wh((r+="\nComments: "+a.comments)+"```"),i.style.visibility="visible",i.style.position="relative",t.style.visibility="hidden",t.style.position="absolute",document.getElementById("sned").innerHTML="Request Sent",sent=!0}}}!function(){function e(e){this.inventory=e,this.inventoryIndex=this.createInventoryIndex(),this.selectedItems={},this.selectedNames=[],this.normalHours=4,this.idleHours=0,this.travelDistance=0;var t=new Date;this.eventMonth=t.getMonth().toString(),this.eventDate=null,this.eventAddress=null,this.priceElements=document.querySelectorAll(".price-link"),this.init(),this.initListeners()}e.prototype.export=function(){return{selectedItems:this.selectedItems,normalHours:this.normalHours,idleHours:this.idleHours,eventDate:this.eventDate,travelDistance:this.travelDistance,location:this.eventAddress,quote:this.priceElements[0].innerText}},e.prototype.init=function(){this.dateTiles=DatePickerTile.initAndGetTiles('[data-tile-type="datepicker"]',this.inventory.monthly_pricing),this.mapTiles=DistanceTile.initAndGetTiles('[data-tile-type="address"]',this.inventory.drive_pricing),this.hourTiles=HourTile.initAndGetTiles('[data-tile-type="hours"]',{min:2,max:8760}),this.idleHourTiles=HourTile.initAndGetTiles('[data-tile-type="idlehours"]',{min:0,max:8760}),this.styleTiles=SelectableTile.initAndGetTiles('[data-tile-type="booth_style"]'),this.sizeTiles=SelectableTile.initAndGetTiles('[data-tile-type="photostripsize"]'),this.extraTiles=SelectableTile.initAndGetTiles('[data-tile-type="extra"]',!0),this.shelterTiles=SelectableTile.initAndGetTiles('[data-tile-type="shelter"]'),this.externalPower=SelectableTile.initAndGetTiles('[data-tile-type="external_power"]')},e.prototype.createInventoryIndex=function(){var e={};for(var t in this.inventory){var i=this.inventory[t];for(var n in i){var s=i[n];s.id&&(e[s.id]=s)}}return e};var t=function(e,t,i){for(var n=0;n<e.length;n++)e[n].addEventListener(t,i)};e.prototype.initListeners=function(){var e=this;t(this.idleHourTiles,"change",function(t,i){e.idleHours=i.hours,e.calculateTotal()}),t(this.hourTiles,"change",function(t,i){e.normalHours=i.hours,e.calculateTotal()}),t(this.mapTiles,"change",function(t,i){e.travelDistance=i.miles,e.eventAddress=i.eventAddress,e.calculateTotal()}),t(this.dateTiles,"change",function(t,i){e.eventMonth=i.month,e.eventDate=i.fullDate,e.calculateTotal()}),t(this.styleTiles.concat(this.sizeTiles).concat(this.extraTiles).concat(this.shelterTiles).concat(this.externalPower),"change",function(t,i){var n=e.inventoryIndex[i.item_id];i.selected?e.addSelectedItem(n.id):e.removeSelectedItem(n.id),e.calculateTotal(),i.selected?e.addSelectedName(n.name):e.removeSelectedName(n.name)})},e.prototype.setSelections=function(e){for(var t=this.styleTiles.concat(this.sizeTiles).concat(this.extraTiles).concat(this.shelterTiles).concat(this.externalPower),i=0;i<t.length;i++)e.indexOf(t[i].getId())>=0&&t[i].select(!0);this.addSelectedName(t[i].root.children[0].innerText)},e.prototype.calculateTotal=function(){var e=0;e+=this.calculateHours(),e+=this.calculateIdleHours(),e+=this.calculateDriveCharge(),e+=this.calculateEventDateCharge(),e+=this.calculateSelectedItems(),this.render(e)},e.prototype.calculateEventDateCharge=function(){return 0===this.dateTiles.length?0:this.dateTiles[0].calculatePrice(this.eventMonth)},e.prototype.calculateDriveCharge=function(){return 0===this.mapTiles.length?0:this.mapTiles[0].calculateDistanceCharge(this.travelDistance).extraCharge},e.prototype.calculateIdleHours=function(){return this.idleHours*this.inventory.hour_pricing.idle_hour_price},e.prototype.calculateHours=function(){var e=this.inventory.hour_pricing,t=this.normalHours.toString();if(t in e.fixed_hours)return e.fixed_hours[t];var i=this.getMaxFixedHour();return e.fixed_hours[i.toString()]+(this.normalHours-i)*e.per_hour_price},e.prototype.calculateSelectedItems=function(){var e=0;for(var t in this.selectedItems)e+=this.inventoryIndex[t].additionalPrice;return e},e.prototype.getMaxFixedHour=function(){var e=[];for(var t in this.inventory.hour_pricing.fixed_hours){var i=parseInt(t);e.push(i)}return e.sort(),e[e.length-1]},e.prototype.render=function(e){for(var t="$"+e,i=0;i<this.priceElements.length;i++)this.priceElements[i].innerHTML=t},e.prototype.addSelectedItem=function(e){this.selectedItems[e]=!0},e.prototype.removeSelectedItem=function(e){e in this.selectedItems&&delete this.selectedItems[e]},e.prototype.addSelectedName=function(e){this.selectedNames.push(e)},e.prototype.removeSelectedName=function(e){delete this.selectedNames[this.selectedNames.indexOf(e)]},window.Cart=e}();
